#!/bin/bash
# this file is generated by roman_technologies/extra/upstart/install.bash

log_file=/tmp/nero-upstart.log
DATE=`date`

rm $log_file

if [ -s /home/panda/setup.sh ]; then
    echo "$DATE: nero-start using setup file /home/panda/setup.sh" >> $log_file
    source /home/panda/setup.sh
else
    echo "$DATE: nero-start using setup file /opt/ros/electric/setup.bash" >> $log_file
    source /opt/ros/electric/setup.bash
fi

if [ -s /etc/ros/electric/ps3joy.launch ]; then
    echo "Using /etc/ros/electric/ps3joy.launch" >> $log_file
    setuidgid panda roslaunch /etc/ros/electric/ps3joy.launch
else
    echo "Using roslaunch nero_launch ps3joy.launch" >> $log_file
    setuidgid panda roscore >> $log_file
    setuidgid root roslaunch nero_launch ps3joy.launch --wait >> $log_file
fi
